<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>Movie Roulette</title>
  <meta name="apple-mobile-web-app-capable" content="yes"/>
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
  <meta name="theme-color" content="#0b0b0b"/>
  <link rel="stylesheet" href="./style.css"/>
</head>
<body>
  <div class="wrap">
    <main class="card" id="root">
      <header>
        <div>
          <h1 class="appTitle">ðŸŽ² Movie Roulette</h1>
          <div class="sub">Presets are law. Chaos obeys.</div>
        </div>
        <div class="deck">Deck: <span id="left">0</span>/<span id="total">0</span></div>
      </header>

      <div class="toolbar">
        <div class="group">
          <span class="label">Mood</span>
          <div class="seg" id="modeSegTop">
            <button data-mode="order">Order</button>
            <button data-mode="mix" class="active">Mix</button>
            <button data-mode="chaos">Chaos</button>
          </div>
        </div>
        <div class="group">
          <span class="label">Bias</span>
          <div class="seg" id="biasSegTop">
            <button data-bias="T" class="active">Tight</button>
            <button data-bias="M">Med</button>
            <button data-bias="W">Wide</button>
          </div>
        </div>
        <div class="presets" id="presets">
          <button class="preset" data-preset="cozy">Cozy offbeat</button>
          <button class="preset" data-preset="midnight">Cult midnight</button>
          <button class="preset" data-preset="folk">Folk dread</button>
        </div>
      </div>

      <section class="stage" aria-live="polite">
        <img id="poster" class="poster skeleton" referrerpolicy="no-referrer" alt="Movie poster"/>
        <div class="infoCol" id="longPressArea">
          <div class="lockRow">
            <span class="lockChip" id="presetLock" style="display:none;"></span>
          </div>
          <h2 class="titleMovie" id="title">â€”</h2>
          <p class="tagline" id="taglineInline" style="display:none;"></p>
          <div class="micro">
            <span id="year"></span>
            <span id="runChip" class="chip" style="display:none;"></span>
            <span id="chaosChip" class="chip" style="display:none;"></span>
          </div>
          <div class="badges" id="streamBadges" style="display:none;"></div>
          <div class="whyBox" id="whyBox" style="display:none;"></div>
          <div class="links" id="linksRow"></div>
          <div class="small" id="err" role="alert" aria-live="polite"></div>
        </div>
      </section>

      <nav class="dock">
        <button id="deal" class="btn pri">Deal</button>
        <button id="reroll" class="btn gh">Re-roll</button>
        <button id="openFilters" class="btn gh">Filters</button>
        <button id="resetDeck" class="btn gh" style="display:none;">Reset</button>
        <button id="shareCard" class="btn gh">Share</button>
        <button id="undo" class="btn gh">Undo banish</button>
      </nav>
    </main>
  </div>

  <dialog id="filtersDlg">
    <div class="dlgHead">
      <strong>Filters</strong><div class="kicker" id="deckCountMini">Deck: 0</div>
    </div>

    <div class="kicker">Themes</div>
    <div class="rowFilt mb8">
      <div class="pill active" id="thAll">All</div>
      <div class="pill" id="thWitch">Witchy</div>
      <div class="pill" id="thBody">Body</div>
      <div class="pill" id="thFolk">Folk</div>
      <div class="pill" id="thFound">Found</div>
      <div class="pill" id="thNeon">Neon</div>
    </div>

    <div class="kicker">Content</div>
    <div class="rowFilt mb12">
      <div class="pill" id="fNoGore">No gore</div>
      <div class="pill" id="fNoSV">No sexual violence</div>
      <div class="pill" id="fNoKids">No kids-in-peril</div>
    </div>

    <div class="rowFilt endRow">
      <button class="btn gh" id="resetAll">Reset</button>
      <button class="btn pri" id="closeFilters">Close</button>
    </div>

    <p class="small tip">
      Enrich <code>data/movies.csv</code> with:<br/>
      <code>Date,Name,Year,Letterboxd URI,Tagline,Chaos,Flags,Poster,Runtime</code>
    </p>
  </dialog>

  <div class="toast" id="toast">Banished for today â€” Undo</div>

  <script src="./script.js"></script>
</body>
</html>
