:root{
  color-scheme: light dark;
  --bg:#0b0b0b; --card:#101010; --fg:#f4f4f4; --muted:#a9b0b6; --border:#1f1f1f;
  --accent:#77ffa5; --accentFg:#061b10; --ghost:#151515;
  --radius:16px; --shadow:0 10px 34px rgba(0,0,0,.45);
}
*{ box-sizing:border-box; -webkit-tap-highlight-color:transparent; }
html,body{ height:100%; margin:0; background:var(--bg); color:var(--fg);
  font:15px/1.45 system-ui,-apple-system,Inter,Segoe UI,Roboto,Arial,sans-serif; overflow:hidden; }
.wrap{ height:100dvh; padding:env(safe-area-inset-top) env(safe-area-inset-right) calc(env(safe-area-inset-bottom)) env(safe-area-inset-left); }
.card{
  width:min(920px,100%); height:calc(100dvh - env(safe-area-inset-top) - env(safe-area-inset-bottom) - 12px);
  margin:auto; background:var(--card); border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow);
  display:grid; grid-template-rows:auto auto 1fr auto; gap:8px; padding:10px; overflow:hidden;
}
header{ display:flex; align-items:center; justify-content:space-between; gap:10px; }
.appTitle{ margin:0; font-weight:900; letter-spacing:.2px; font-size:20px; }
.sub{ color:var(--muted); font-size:12px; margin-top:-4px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.deck{ color:#cfe; font-size:12px; padding:6px 10px; border:1px solid #263; border-radius:10px; background:#0f1a14; }

/* Vibe chooser row */
.vibeBar{ display:grid; grid-template-columns:1fr auto; gap:10px; align-items:center; }
@media (max-width:680px){ .vibeBar{ grid-template-columns:1fr; } }
.triWrap{ display:grid; grid-template-columns:auto 1fr; gap:12px; align-items:center; }
@media (max-width:520px){ .triWrap{ grid-template-columns:1fr; } }
.triLegend{ display:flex; gap:14px; flex-wrap:wrap; font-size:12px; color:#a7c9bb; }
.triLegend b{ color:#c8ffe0; font-weight:900; }
.vibeSide{ display:grid; gap:8px; }
.group{ display:flex; gap:8px; align-items:center; }
.label{ color:#9ab; font-size:12px; }
.seg{ display:flex; background:#141414; border:1px solid #262626; border-radius:999px; overflow:hidden; }
.seg button{ background:transparent; border:0; color:#dfffe8; padding:8px 12px; font-weight:900; font-size:13px; cursor:pointer; white-space:nowrap; }
.seg button.active{ background:#203626; color:#b8ffd1; }

.presets{ display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
.preset{ background:#141414; border:1px solid #262626; color:#dfffe8; font-weight:800; font-size:12px;
         padding:6px 10px; border-radius:999px; cursor:pointer; }
.lockChip{ background:#0f1a14; border:1px solid #264; color:#bff7cf; padding:4px 8px; font-weight:800; font-size:11px; border-radius:999px; }

/* Triangle control canvas */
#vibePad{ width:160px; height:140px; border-radius:12px; border:1px solid #1f1f1f; background:#0f1511; position:relative; }
@media (min-width:680px){ #vibePad{ width:220px; height:180px; } }
#vibePad canvas{ width:100%; height:100%; display:block; border-radius:12px; }

/* Card area */
.stage{
  min-height:0; display:grid; grid-template-columns:56% 1fr; gap:12px;
  align-items:start; overflow:hidden; width:100%;
}
@media (min-width:760px){ .stage{ grid-template-columns:minmax(48%,1fr) 1fr; } }

.poster{
  width:100%; aspect-ratio:2/3; object-fit:cover; border-radius:14px;
  background:#181818; border:1px solid #1f1f1f;
}
.poster.skeleton{ animation:pulse 1.2s infinite ease-in-out; background:linear-gradient(90deg,#141414 25%,#1a1a1a 37%,#141414 63%); background-size:400% 100%; }
@keyframes pulse{0%{background-position:100% 0}100%{background-position:-100% 0}}

.infoCol{ min-width:0; display:grid; grid-template-rows:auto auto auto 1fr; gap:8px; overflow:hidden; }
.titleMovie{ margin:0; font-weight:1000; font-size:22px; line-height:1.15; word-break:break-word; }
.tagline{ color:#d6e2dd; font-size:14px; margin:0; display:-webkit-box; -webkit-line-clamp:3; -webkit-box-orient:vertical; overflow:hidden; }
.chips{ display:flex; gap:8px; flex-wrap:wrap; }
.chip{ background:#141414; border:1px solid #262626; border-radius:999px; padding:6px 10px; font-weight:800; font-size:12px; color:#d8ffe9; }

#vibeBadge{ width:100%; max-width:280px; }
#vibeBadge svg{ width:100%; height:auto; display:block; }
#vibeBadge .lab{ font:11px system-ui,-apple-system,Inter,Segoe UI,Roboto; fill:#a7c9bb; }

.links{ display:grid; grid-template-columns:1fr; gap:8px; }
.links a{ display:block; padding:12px; text-align:center; border-radius:12px; text-decoration:none; font-weight:900; font-size:15px; background:#1b1b1b; color:#c0ffd6; border:1px solid #2a2a2a; }

/* Bottom dock (buttons scroll instead of squish) */
.dock{
  display:flex; gap:10px; align-items:center; padding-bottom:calc(env(safe-area-inset-bottom) + 2px);
  overflow-x:auto; -webkit-overflow-scrolling:touch; scroll-snap-type:x mandatory;
}
.dock .btn{ scroll-snap-align:center; min-width:120px; }
.btn{ appearance:none; border:0; border-radius:14px; padding:14px 12px; font-weight:900; cursor:pointer; font-size:15px; }
.btn.pri{ background:var(--accent); color:var(--accentFg); }
.btn.gh{ background:var(--ghost); color:var(--fg); border:1px solid #262626; }

dialog{ border:1px solid var(--border); background:#0f0f0f; color:#fff; border-radius:16px; width:min(560px, 92vw); padding:14px; }
dialog::backdrop{ background:rgba(0,0,0,.6); }
.dlgHead{ display:flex; align-items:center; justify-content:space-between; margin-bottom:8px; }
.rowFilt{ display:flex; gap:8px; flex-wrap:wrap; }
.mb8{ margin-bottom:8px; } .mb12{ margin-bottom:12px; }
.endRow{ justify-content:flex-end; }
.pill{ background:#161616; border:1px solid #2a2a2a; border-radius:999px; padding:8px 10px; font-weight:800; font-size:13px; color:#dfffe8; cursor:pointer; }
.pill.active{ background:#242a24; color:#b6ffd1; }
.kicker{ color:#9ab; font-size:12px; }
.small{ color:#9ab; font-size:11px; white-space:normal; }

.toast{
  position:fixed; left:50%; bottom:calc(18px + env(safe-area-inset-bottom)); transform:translateX(-50%);
  background:#0f1511; border:1px solid #2a3a2f; color:#caffe0; padding:10px 12px; border-radius:12px; font-weight:800;
  display:none; z-index:50;
}
.toast.show{ display:block; animation:fade 3s ease both; }
@keyframes fade{ 0%{opacity:0; transform:translate(-50%, 8px)} 10%{opacity:1; transform:translate(-50%,0)} 90%{opacity:1} 100%{opacity:0} }
 
